<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>键盘控制div移动，解决停顿的问题</title>
<style type="text/css">
body{padding: 0;margin: 0;}
#div1{width: 100px; height: 100px; border: 1px solid #eee; background: #24a8a3;position: absolute; }
</style>
<script type="text/javascript">
window.onload = function(){
	var oDiv = document.getElementById('div1');
	var key = { t: null,d: null,l: null,r: null};
	setInterval(function(){
		if(key.t){
			oDiv.style.top = oDiv.offsetTop - 20 + 'px';
		}
		if(key.l){
			oDiv.style.left = oDiv.offsetLeft - 20 + 'px';
		}
		if(key.d){
			oDiv.style.top = oDiv.offsetTop + 20 + 'px';
		}
		if(key.r){
			oDiv.style.left = oDiv.offsetLeft + 20 + 'px';
		}
	},50)

	document.onkeydown = function(ev){
		var ev = ev || event;
		switch(ev.keyCode){
			case 37:key.l = true;break;  //键值
			case 38:key.t = true;break;
			case 39:key.r = true;break;
			case 40:key.d = true;break;
		}
	}
	document.onkeyup = function(ev){
		var ev = ev || event;
		switch(ev.keyCode){
			case 37:key.l = false;break;
			case 38:key.t = false;break;
			case 39:key.r = false;break;
			case 40:key.d = false;break;
		}
	}
}
</script>
</head>
<body>
	<div id="div1"></div>
</body>
</html>