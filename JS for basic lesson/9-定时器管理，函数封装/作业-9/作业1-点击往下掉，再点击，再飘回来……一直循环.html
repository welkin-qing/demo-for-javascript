<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>点击往下掉</title>

<script src="miaov.js"></script>
<script>
window.onload = function () {
	var str = '';
	var len = 20;
	var aDiv = document.getElementsByTagName('div');
	var timer = null;
	var num = 0;
	
	var flag = true;  //控制方向
	var finished = true;  //控制一轮有没有完成

	for ( var i=0; i<len; i++ ) {
		str += '<div style="width:50px; height:50px; background:red; position:absolute; top:0px; left:'+ i*60 +'px;"></div>';
	}
	
	document.body.innerHTML = str;
	
	/*document.onclick = function () {
		clearInterval( timer );
		timer = setInterval( function (){
			doMove( aDiv[num], 'top', 23, 500 );
			num ++;
			if ( num === len ) {
				clearInterval( timer );
			}
		}, 100 );
	}*/
	document.onclick = function(){
		if( !finished){return ;}  //如果没有完成则退出
		finished = false;
		clearInterval(timer);
		timer = setInterval(function(){
			doMove(aDiv[num], 'top',23, flag?500:0, num == len - 1 ? function(){
				finished = true;
				flag = !flag;
				//alert(1);
			} : null);
			num++;
			if(num === len){
				clearInterval(timer);
				num = 0;
			}
		},100);
	}
};
</script>

</head>

<body>
</body>
</html>

